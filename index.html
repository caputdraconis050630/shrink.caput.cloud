<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8">
        <title>Shortener</title>
        <style>
            body, html {
                height: 100%;
                margin: 0;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                font-family: Arial, sans-serif;
            }
            input[type="text"] {
                width: 300px; /* ê¸°ë³¸ ë„ˆë¹„ */
                height: 40px;
                border: 2px solid #ddd;
                border-radius: 50px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
                outline: none;
                padding: 8px 16px;
                transition: width 0.3s ease; /* ë„ˆë¹„ ë³€ê²½ ì• ë‹ˆë©”ì´ì…˜ */
                text-align: center;
            }
            input[type="text"]:focus {
                width: 500px; /* í¬ì»¤ìŠ¤ ì‹œ ë„ˆë¹„ */
                border-color: #0056b3; /* í¬ì»¤ìŠ¤ ì‹œ í…Œë‘ë¦¬ ìƒ‰ìƒ ë³€ê²½ */
            }
        </style>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                const input = document.querySelector('input[type="text"]');
                const copyBtn = document.getElementById('copyButton');

                input.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    const data = { value: input.value };
                    fetch('/create', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data.body.url_short);
                        input.value = data.body.url_short; // ì„œë²„ ì‘ë‹µì„ ì…ë ¥ì°½ì— í‘œì‹œ
                        copyBtn.style.display = 'inline'; // ë³µì‚¬ ë²„íŠ¼ í‘œì‹œ
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                    });
                }
                });

                copyBtn.addEventListener('click', function() {
                navigator.clipboard.writeText(input.value).then(() => {
                    alert('Copied to clipboard!');
                }).catch(err => {
                    alert('Error in copying text: ', err);
                });
                });
            });
          </script>
    </head>
    <body>
        <h1>CAPUT.CLOUD</h1>
        <p>Private URL Shortener</p>
        <input type="text" placeholder="ğŸ”— Enter your Long URL here ğŸ”—">
        <button id="copyButton" style="display:none;">ë³µì‚¬</button>
    </body>
</html>
